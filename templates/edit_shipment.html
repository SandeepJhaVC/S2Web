{% extends 'admin.html' %}
{% block title %} Edit Shipment {% endblock %}
{% block content %}
<div class="container">
    <h2 class="text-center bg-danger text-white pb-1">Edit Shipment</h2>
    <form method="POST" action="{{ url_for('edit_shipment', id=id) }}" class="mt-5">
        <h5>Shipper Information</h5>
        <div class="form-group">
            <label for="shipperName">Shipper Name</label>
            <input type="text" class="form-control" name="shipperName" id="shipperName" value="{{ shipment.shipper_name }}">
        </div>
        <!-- other shipper fields -->

        <h5>Receiver Information</h5>
        <div class="form-group">
            <label for="receiverName">Receiver Name</label>
            <input type="text" class="form-control" name="receiverName" id="receiverName" value="{{ shipment.receiver_name }}">
        </div>
        <!-- other receiver fields -->

        <h5>Additional Shipment Details</h5>
        <!-- additional shipment details fields -->

        <h3>Packages</h3>
          <div id="packages" class="row">
              <!-- Package Inputs -->
              <div class="form-group col-md-2">
                  <label for="qty">Qty</label>
                  <input type="number" class="form-control" id="qty" name="qty[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="pieceType">Piece Type</label>
                  <input type="text" class="form-control" id="pieceType" name="pieceType[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="description">Description</label>
                  <input type="text" class="form-control" id="description" name="description[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="length">Length (cm)</label>
                  <input type="number" class="form-control" id="length" name="length[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="width">Width (cm)</label>
                  <input type="number" class="form-control" id="width" name="width[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="height">Height (cm)</label>
                  <input type="number" class="form-control" id="height" name="height[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="weight">Weight (kg)</label>
                  <input type="number" class="form-control" id="weight" name="weight[]">
              </div>

          </div>
          <button type="button" class="m-3" onclick="addPackage()">Add Package</button>

        <!-- <h5>Shipment History</h5> -->
        <!-- shipment history fields -->

        <br><button type="submit" class="btn btn-primary">Update Shipment</button>
    </form>
</div>

<script>
    function deletePackage(button) {
        // Get the parent row of the delete button
        var packageRow = button.parentElement.parentElement;
        // Remove the parent row
        packageRow.remove();
      }
      function addPackage() {
          var packageDiv = document.getElementById('packages');
          var newPackage = document.createElement('div');
          newPackage.className = 'row';

          newPackage.innerHTML = `
              <div class="form-group col-md-2">
                  <label for="qty">Qty</label>
                  <input type="number" class="form-control" id="qty" name="qty[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="pieceType">Piece Type</label>
                  <input type="text" class="form-control" id="pieceType" name="pieceType[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="description">Description</label>
                  <input type="text" class="form-control" id="description" name="description[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="length">Length (cm)</label>
                  <input type="number" class="form-control" id="length" name="length[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="width">Width (cm)</label>
                  <input type="number" class="form-control" id="width" name="width[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="height">Height (cm)</label>
                  <input type="number" class="form-control" id="height" name="height[]">
              </div>
              <div class="form-group col-md-2">
                  <label for="weight">Weight (kg)</label>
                  <input type="number" class="form-control" id="weight" name="weight[]">
              </div>
              <div class="form-group col-md-2 align-self-end">
                  <button type="button" class="btn btn-danger mt-auto" onclick="deletePackage(this)">Delete</button>
              </div>
          `;
          packageDiv.appendChild(newPackage);
      }
</script>
{% endblock %}
