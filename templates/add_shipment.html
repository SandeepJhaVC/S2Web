{% extends 'admin.html' %}
{% block title %} Add Shipment {% endblock %}
{% block content %}
<div class="container mt-5">
  <form method="POST" action="{{ url_for('add_shipment') }}">
    <div class="row">
      <div class="col-lg-9">
        <div class="row mb-3">
          <!-- Shipper Information -->
          <div class="col-md-6">
            <div class="card p-4 mb-4 h-100 d-flex flex-column">
              <h3 class="mb-4">Consigner Information</h3>
              <div class="mb-3">
                <label for="shipName" class="form-label">Consigner Name</label>
                <input type="text" class="form-control" id="shipName" name="shipName" required>
              </div>
              <div class="mb-3">
                <label for="shipPhone" class="form-label">Phone Number</label>
                <input type="text" class="form-control" id="shipPhone" name="shipPhone" required>
              </div>
              <div class="mb-3">
                <label for="shipAddress" class="form-label">Address</label>
                <input type="text" class="form-control" id="shipAddress" name="shipAddress" required>
              </div>
              <div class="mb-3">
                <label for="shipEmail" class="form-label">Email</label>
                <input type="email" class="form-control" id="shipEmail" name="shipEmail">
              </div>
              <div class="mb-3">
                <label for="shipGST" class="form-label">GST NO</label>
                <input type="text" class="form-control" id="shipGST" name="shipGST">
              </div>
              <div class="mt-auto"></div> <!-- Pushes content to the bottom -->
            </div>
          </div>

          <!-- Receiver Information -->
          <div class="col-md-6">
            <div class="card p-4 mb-4 h-100 d-flex flex-column">
              <h3 class="mb-4">Consignee Information</h3>
              <div class="mb-3">
                <label for="recName" class="form-label">Consignee Name</label>
                <input type="text" class="form-control" id="recName" name="recName" required>
              </div>
              <div class="mb-3">
                <label for="recPhone" class="form-label">Phone Number</label>
                <input type="text" class="form-control" id="recPhone" name="recPhone" required>
              </div>
              <div class="mb-3">
                <label for="recAddress" class="form-label">Address</label>
                <input type="text" class="form-control" id="recAddress" name="recAddress" required>
              </div>
              <div class="mb-3">
                <label for="recEmail" class="form-label">Email</label>
                <input type="email" class="form-control" id="recEmail" name="recEmail">
              </div>
              <div class="mt-auto"></div> <!-- Pushes content to the bottom -->
            </div>
          </div>
        </div>

        <!-- Additional Shipment Details -->
        <div class="card p-4 mb-3">
          <!-- Remaining content unchanged -->
          <h3>Additional Shipment Details</h3>
          <div class="form-group">
            <label for="aptNumber">PO ID</label>
            <input type="text" class="form-control" id="POID" name="POID">
          </div>
          <div class="form-group">
            <label for="aptNumber">Appointment Number</label>
            <input type="text" class="form-control" id="aptNumber" name="aptNumber">
          </div>
          <div class="form-group">
            <label for="aptDate">Appointment Date</label>
            <input type="date" class="form-control" id="aptDate" name="aptDate">
          </div>
          <div class="form-group">
            <label for="unitCount">Unit Count</label>
            <input type="number" class="form-control" id="unitCount" name="unitCount">
          </div>
          <div class="form-group">
            <label for="cnNumber">CNN</label>
            <input type="text" class="form-control" id="cnNumber" name="cnNumber">
          </div>
          <div class="form-group">
            <label for="pickDate">Pickup Date</label>
            <input type="date" class="form-control" id="pickDate" name="pickDate">
          </div>
          <div class="form-group">
            <label for="pickLocate">Pickup Location</label>
            <input type="text" class="form-control" id="pickLocate" name="pickLocate">
          </div>
          
          <div class="form-group">
            <label for="shipmentType">Type of Shipment</label>
            <select class="form-control" id="shipmentType" name="shipmentType" required>
                <option>-- Select One --</option>
                <option>FTL - Full Truck Load</option>
                <option>PTL - Part Truck Load</option>
            </select>
          </div>
          <div class="form-group">
            <label for="boxCount">Box Count</label>
            <input type="number" class="form-control" id="boxCount" name="boxCount">
          </div>
          <div class="form-group">
            <label for="poNumber">PO Number</label>
            <input type="text" class="form-control" id="poNumber" name="poNumber">
          </div>
          <div class="form-group">
            <label for="poExpiry">PO Expiry</label>
            <input type="date" class="form-control" id="poExpiry" name="poExpiry">
          </div>
          <div class="form-group">
            <label for="invoiceNumber">Invoice Number</label>
            <input type="text" class="form-control" id="invoiceNumber" name="invoiceNumber">
          </div>
          <div class="form-group">
            <label for="invoiceValue">Invoice Value</label>
            <input type="number" class="form-control" id="invoiceValue" name="invoiceValue">
          </div>
          
          <div class="form-group">
            <label for="amountCollected">Amount Collected</label>
            <input type="number" class="form-control" id="amountCollected" name="amountCollected">
          </div>
          <div class="form-group">
            <label for="Route">Route</label>
            <select class="form-control" id="Route" name="Route" required>
                <option>-- Select One --</option>
                <option>karan</option>
            </select>
          </div>
        </div>

        <!-- Packages -->
          <div class="card p-4 mb-3">
              <h3>Packages</h3>
              <div id="packages" class="row">
                <!-- Package Inputs -->
                <div class="form-group col-md-2">
                    <label for="qty">Qty</label>
                    <input type="number" class="form-control" id="qty" name="qty[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="pieceType">Piece Type</label>
                    <input type="text" class="form-control" id="pieceType" name="pieceType[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="description">Description</label>
                    <input type="text" class="form-control" id="description" name="description[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Actual Weight (kg)</label>
                    <input type="number" class="form-control" id="act_weight" name="act_weight[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Volumetric Weight (kg)</label>
                    <input type="number" class="form-control" id="vol_weight" name="vol_weight[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Charged Weight (kg)</label>
                    <input type="number" class="form-control" id="ch_weight" name="ch_weight[]">
                </div>                  
              </div>
              <button type="button" class="m-3" onclick="addPackage()">Add Package</button>
          </div>

        <!-- Submit Button -->
        <div class="text-center mb-4">
          <!-- Remaining content unchanged -->
          <button type="submit" class="btn btn-primary">Add Shipment</button>
        </div>
      </div>

      <!-- Container Details -->
      <div class="col-lg-3">
        <div class="card p-4">
          <!-- Remaining content unchanged -->
          <h3>Container Details</h3>
          <div class="form-group">
              <label for="container">Shipment Container</label>
              <select class="form-control" id="container" name="container">
                <option>-- Select Container --</option>
                <option>Tata Ace</option>
                <option>Bolero</option>
                <option>14ft</option>
                <option>17ft</option>
                <option>20ft</option>
                <option>22ft</option>
                <option>24ft</option>
                <option>32ft</option>
              </select>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
  function deletePackage(button) {
    // Get the parent row of the delete button
    var packageRow = button.parentElement.parentElement;
    // Remove the parent row
    packageRow.remove();
  }
  function addPackage() {
      var packageDiv = document.getElementById('packages');
      var newPackage = document.createElement('div');
      newPackage.className = 'row';

      newPackage.innerHTML = `
          <div class="form-group col-md-2">
                    <label for="qty">Qty</label>
                    <input type="number" class="form-control" id="qty" name="qty[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="pieceType">Piece Type</label>
                    <input type="text" class="form-control" id="pieceType" name="pieceType[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="description">Description</label>
                    <input type="text" class="form-control" id="description" name="description[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Actual Weight (kg)</label>
                    <input type="number" class="form-control" id="act_weight" name="act_weight[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Volumetric Weight (kg)</label>
                    <input type="number" class="form-control" id="vol_weight" name="vol_weight[]">
                </div>
                <div class="form-group col-md-2">
                    <label for="weight">Charged Weight (kg)</label>
                    <input type="number" class="form-control" id="ch_weight" name="ch_weight[]">
                </div>
          <div class="form-group col-md-2 align-self-end">
              <button type="button" class="btn btn-danger mt-auto" onclick="deletePackage(this)">Delete</button>
          </div>
      `;
      packageDiv.appendChild(newPackage);
  }
</script>
{% endblock %}
